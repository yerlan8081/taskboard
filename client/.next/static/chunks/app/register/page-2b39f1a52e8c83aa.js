(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6363:function(t,e,n){Promise.resolve().then(n.bind(n,6406))},6406:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var r=n(7437),s=n(5694),a=n(7138),i=n(6463),u=n(2265),o=n(4078),l=n(3947);function d(){let t=(0,i.useRouter)(),e=(0,l.t)(t=>t.token),n=(0,l.t)(t=>t.setToken),d=(0,l.t)(t=>t.setUser),[c,m]=(0,u.useState)(""),[f,p]=(0,u.useState)(""),[b,h]=(0,u.useState)(""),[x,g]=(0,u.useState)(""),[v,w]=(0,u.useState)(null);(0,u.useEffect)(()=>{e&&t.replace("/boards")},[t,e]);let[y,{loading:I}]=(0,s.D)(o.Nz,{onCompleted:e=>{let r=null==e?void 0:e.register;(null==r?void 0:r.token)&&(n(r.token),d(r.user),t.push("/boards"))},onError:t=>{w(t.message)}});return(0,r.jsxs)("main",{className:"w-full max-w-xl space-y-6 rounded-3xl border border-white/10 bg-slate-900/70 px-8 py-10 shadow-2xl backdrop-blur",children:[(0,r.jsxs)("header",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-amber-300",children:"Taskboard"}),(0,r.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Register"}),(0,r.jsx)("p",{className:"text-sm text-slate-400",children:"Create an account to start using Taskboard."})]}),(0,r.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),c.trim().length<2){w("Name should be at least 2 characters");return}if(!f.includes("@")){w("Please enter a valid email");return}if(b.length<6){w("Password must be at least 6 characters");return}if(b!==x){w("Passwords do not match");return}w(null),y({variables:{input:{name:c.trim(),email:f.trim(),password:b}}})},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-slate-300",children:"Name"}),(0,r.jsx)("input",{value:c,onChange:t=>m(t.target.value),className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-white focus:border-amber-400 focus:outline-none",type:"text",placeholder:"Your name",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-slate-300",children:"Email"}),(0,r.jsx)("input",{value:f,onChange:t=>p(t.target.value),className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-white focus:border-amber-400 focus:outline-none",type:"email",placeholder:"you@example.com",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-slate-300",children:"Password"}),(0,r.jsx)("input",{value:b,onChange:t=>h(t.target.value),className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-white focus:border-amber-400 focus:outline-none",type:"password",placeholder:"At least 6 characters",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-slate-300",children:"Confirm Password"}),(0,r.jsx)("input",{value:x,onChange:t=>g(t.target.value),className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-white focus:border-amber-400 focus:outline-none",type:"password",placeholder:"Repeat password",required:!0})]}),v&&(0,r.jsx)("p",{className:"text-sm text-red-300",children:v}),(0,r.jsx)("button",{type:"submit",disabled:I,className:"w-full rounded-xl bg-amber-500 px-4 py-2 text-center text-sm font-semibold text-slate-900 shadow hover:bg-amber-400 disabled:opacity-60",children:I?"Registering...":"Register"})]}),(0,r.jsxs)("div",{className:"text-sm text-slate-400",children:["Already have an account?"," ",(0,r.jsx)(a.default,{href:"/login",className:"text-amber-300 hover:text-amber-200",children:"Go to login"})]})]})}},4078:function(t,e,n){"use strict";n.d(e,{$E:function(){return P},Bv:function(){return _},Jn:function(){return y},Nz:function(){return v},V_:function(){return N},XB:function(){return k},Z8:function(){return j},ew:function(){return $},mL:function(){return w},sY:function(){return I},ym:function(){return g}});var r=n(8646),s=n(1432);function a(){let t=(0,r._)(["\n  mutation Login($input: LoginInput!) {\n    login(input: $input) {\n      token\n      user {\n        id\n        email\n        name\n        role\n        status\n      }\n    }\n  }\n"]);return a=function(){return t},t}function i(){let t=(0,r._)(["\n  mutation Register($input: RegisterInput!) {\n    register(input: $input) {\n      token\n      user {\n        id\n        email\n        name\n        role\n        status\n      }\n    }\n  }\n"]);return i=function(){return t},t}function u(){let t=(0,r._)(["\n  query Me {\n    me {\n      id\n      email\n      name\n      role\n      status\n    }\n  }\n"]);return u=function(){return t},t}function o(){let t=(0,r._)(["\n  query Boards {\n    boards {\n      id\n      title\n      visibility\n    }\n  }\n"]);return o=function(){return t},t}function l(){let t=(0,r._)(["\n  query Board($id: ID!) {\n    board(id: $id) {\n      id\n      title\n      visibility\n      ownerId\n    }\n  }\n"]);return l=function(){return t},t}function d(){let t=(0,r._)(["\n  query Lists($boardId: ID!) {\n    lists(boardId: $boardId) {\n      id\n      title\n      order\n      color\n    }\n  }\n"]);return d=function(){return t},t}function c(){let t=(0,r._)(["\n  query Tasks($listId: ID!) {\n    tasks(listId: $listId) {\n      id\n      listId\n      title\n      description\n      status\n      priority\n      tags\n    }\n  }\n"]);return c=function(){return t},t}function m(){let t=(0,r._)(["\n  query Task($id: ID!) {\n    task(id: $id) {\n      id\n      listId\n      title\n      description\n      status\n      priority\n      tags\n      assigneeId\n      dueDate\n    }\n  }\n"]);return m=function(){return t},t}function f(){let t=(0,r._)(["\n  mutation CreateBoard($input: CreateBoardInput!) {\n    createBoard(input: $input) {\n      id\n      title\n      visibility\n    }\n  }\n"]);return f=function(){return t},t}function p(){let t=(0,r._)(["\n  mutation CreateList($input: CreateListInput!) {\n    createList(input: $input) {\n      id\n      title\n      order\n      boardId\n    }\n  }\n"]);return p=function(){return t},t}function b(){let t=(0,r._)(["\n  mutation CreateTask($input: CreateTaskInput!) {\n    createTask(input: $input) {\n      id\n      title\n      listId\n      status\n      priority\n      tags\n    }\n  }\n"]);return b=function(){return t},t}function h(){let t=(0,r._)(["\n  mutation UpdateTaskStatus($id: ID!, $status: TaskStatus!) {\n    updateTaskStatus(id: $id, status: $status) {\n      id\n      title\n      listId\n      status\n      priority\n      tags\n    }\n  }\n"]);return h=function(){return t},t}function x(){let t=(0,r._)(["\n  subscription TaskUpdated($boardId: ID!) {\n    taskUpdated(boardId: $boardId) {\n      type\n      task {\n        id\n        listId\n        title\n        status\n        priority\n        tags\n      }\n    }\n  }\n"]);return x=function(){return t},t}let g=(0,s.Ps)(a()),v=(0,s.Ps)(i());(0,s.Ps)(u());let w=(0,s.Ps)(o()),y=(0,s.Ps)(l()),I=(0,s.Ps)(d()),k=(0,s.Ps)(c());(0,s.Ps)(m());let N=(0,s.Ps)(f()),_=(0,s.Ps)(p()),$=(0,s.Ps)(b()),j=(0,s.Ps)(h()),P=(0,s.Ps)(x())},6463:function(t,e,n){"use strict";var r=n(1169);n.o(r,"useParams")&&n.d(e,{useParams:function(){return r.useParams}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}})},3947:function(t,e,n){"use strict";n.d(e,{t:function(){return i}});var r=n(9099);let s="taskboard_token",a="taskboard_user",i=(0,r.Ue)(t=>({token:null,user:null,hydrated:!1,setToken:e=>{e?window.localStorage.setItem(s,e):window.localStorage.removeItem(s),t({token:e})},setUser:e=>{e?window.localStorage.setItem(a,JSON.stringify(e)):window.localStorage.removeItem(a),t({user:e})},clearAuth:()=>{window.localStorage.removeItem(s),window.localStorage.removeItem(a),t({token:null,user:null})},hydrateFromStorage:()=>{let e=window.localStorage.getItem(s),n=window.localStorage.getItem(a);t({token:e||null,user:n?JSON.parse(n):null,hydrated:!0})}}))},9422:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var r=n(2474),s=n(2511).Nq?r.useLayoutEffect:r.useEffect},5694:function(t,e,n){"use strict";n.d(e,{D:function(){return m}});var r=n(1735),s=n(2474),a=n(1135),i=n(4511),u=n(8607),o=n(1288),l=n(2471),d=n(9422),c=n(4230);function m(t,e){!1!==globalThis.__DEV__&&(0,c.G)(e||{},"ignoreResults","useMutation","If you don't want to synchronize component state with the mutation, please use the `useApolloClient` hook to get the client instance and call `client.mutate` directly.");var n=(0,l.x)(null==e?void 0:e.client);(0,u.Vp)(t,u.n_.Mutation);var m=s.useState({called:!1,loading:!1,client:n}),f=m[0],p=m[1],b=s.useRef({result:f,mutationId:0,isMounted:!0,client:n,mutation:t,options:e});(0,d.L)(function(){Object.assign(b.current,{client:n,options:e,mutation:t})});var h=s.useCallback(function(t){void 0===t&&(t={});var e=b.current,n=e.options,s=e.mutation,u=(0,r.pi)((0,r.pi)({},n),{mutation:s}),l=t.client||b.current.client;b.current.result.loading||u.ignoreResults||!b.current.isMounted||p(b.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:l});var d=++b.current.mutationId,c=(0,a.J)(u,t);return l.mutate(c).then(function(e){var n,r,s=e.data,a=e.errors,u=a&&a.length>0?new o.cA({graphQLErrors:a}):void 0,m=t.onError||(null===(n=b.current.options)||void 0===n?void 0:n.onError);if(u&&m&&m(u,c),d===b.current.mutationId&&!c.ignoreResults){var f={called:!0,loading:!1,data:s,error:u,client:l};b.current.isMounted&&!(0,i.D)(b.current.result,f)&&p(b.current.result=f)}var h=t.onCompleted||(null===(r=b.current.options)||void 0===r?void 0:r.onCompleted);return u||null==h||h(e.data,c),e},function(e){if(d===b.current.mutationId&&b.current.isMounted){var n,r={loading:!1,error:e,data:void 0,called:!0,client:l};(0,i.D)(b.current.result,r)||p(b.current.result=r)}var s=t.onError||(null===(n=b.current.options)||void 0===n?void 0:n.onError);if(s)return s(e,c),{data:void 0,errors:e};throw e})},[]),x=s.useCallback(function(){if(b.current.isMounted){var t={called:!1,loading:!1,client:b.current.client};Object.assign(b.current,{mutationId:0,result:t}),p(t)}},[]);return s.useEffect(function(){var t=b.current;return t.isMounted=!0,function(){t.isMounted=!1}},[]),[h,(0,r.pi)({reset:x},f)]}}},function(t){t.O(0,[22,506,971,23,744],function(){return t(t.s=6363)}),_N_E=t.O()}]);