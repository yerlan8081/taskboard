(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{8242:function(t,e,n){Promise.resolve().then(n.bind(n,925))},925:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=n(7437),i=n(632),s=n(5694),o=n(7138),a=n(2265),u=n(6463),l=n(4078),d=n(3947);function c(){var t;let e=(0,d.t)(t=>t.token),n=(0,d.t)(t=>t.setToken),c=(0,d.t)(t=>t.clearAuth),m=(0,u.useRouter)();(0,a.useEffect)(()=>{if(!e){let t=localStorage.getItem("taskboard_token");t?n(t):m.replace("/login")}},[m,n,e]);let{data:f,loading:p,error:x,refetch:b}=(0,i.aM)(l.mL,{skip:!e}),[h,{loading:g,error:v}]=(0,s.D)(l.V_,{onCompleted:()=>b()}),w=async t=>{let e=String(t.get("title")||"").trim();e&&await h({variables:{input:{title:e,visibility:"PRIVATE"}}})};return e?(0,r.jsxs)("main",{className:"w-full max-w-4xl space-y-6 rounded-3xl border border-white/10 bg-slate-900/70 px-8 py-10 shadow-2xl backdrop-blur",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-amber-300",children:"Boards"}),(0,r.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Your boards"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,r.jsx)(o.default,{href:"/dashboard",className:"text-amber-300 hover:text-amber-200",children:"Dashboard"}),(0,r.jsx)(o.default,{href:"/profile",className:"text-amber-300 hover:text-amber-200",children:"View profile"}),(0,r.jsx)("button",{onClick:()=>{c(),m.replace("/login")},className:"rounded-lg border border-white/20 px-3 py-1 text-slate-200 hover:border-amber-400",children:"Logout"})]})]}),(0,r.jsxs)("form",{action:w,className:"flex flex-col gap-3 rounded-2xl border border-white/10 bg-black/30 p-4 sm:flex-row sm:items-center",children:[(0,r.jsx)("input",{name:"title",placeholder:"New board title",className:"w-full rounded-xl border border-white/10 bg-slate-800/50 px-3 py-2 text-white focus:border-amber-400 focus:outline-none",required:!0}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"rounded-xl bg-amber-500 px-4 py-2 text-sm font-semibold text-slate-900 shadow hover:bg-amber-400 disabled:opacity-60",children:g?"Creating...":"Create board"})]}),v&&(0,r.jsx)("p",{className:"text-sm text-red-300",children:v.message}),x&&(0,r.jsx)("p",{className:"text-sm text-red-300",children:x.message}),(0,r.jsxs)("section",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Board list"}),p&&(0,r.jsx)("span",{className:"text-xs text-slate-400",children:"Loading..."})]}),(null==f?void 0:null===(t=f.boards)||void 0===t?void 0:t.length)?(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:f.boards.map(t=>(0,r.jsxs)(o.default,{href:"/boards/".concat(t.id),className:"rounded-2xl border border-white/10 bg-white/5 p-4 transition hover:border-amber-400",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-lg font-semibold text-white",children:t.title}),(0,r.jsx)("span",{className:"rounded bg-slate-800 px-2 py-0.5 text-xs uppercase text-amber-200",children:t.visibility})]}),(0,r.jsxs)("p",{className:"text-xs text-slate-400",children:["ID: ",t.id]})]},t.id))}):(0,r.jsx)("p",{className:"text-sm text-slate-400",children:"No boards yet."})]})]}):(0,r.jsxs)("main",{className:"w-full max-w-3xl space-y-4 rounded-3xl border border-white/10 bg-slate-900/70 px-8 py-10 shadow-2xl backdrop-blur",children:[(0,r.jsx)("p",{className:"text-sm text-slate-300",children:"Please login to view boards."}),(0,r.jsx)(o.default,{className:"text-amber-300 hover:text-amber-200",href:"/login",children:"Go to login"})]})}},4078:function(t,e,n){"use strict";n.d(e,{$E:function(){return P},Bv:function(){return j},Jn:function(){return I},Nz:function(){return v},V_:function(){return N},XB:function(){return k},Z8:function(){return $},ew:function(){return _},mL:function(){return w},sY:function(){return y},ym:function(){return g}});var r=n(8646),i=n(1432);function s(){let t=(0,r._)(["\n  mutation Login($input: LoginInput!) {\n    login(input: $input) {\n      token\n      user {\n        id\n        email\n        name\n        role\n        status\n      }\n    }\n  }\n"]);return s=function(){return t},t}function o(){let t=(0,r._)(["\n  mutation Register($input: RegisterInput!) {\n    register(input: $input) {\n      token\n      user {\n        id\n        email\n        name\n        role\n        status\n      }\n    }\n  }\n"]);return o=function(){return t},t}function a(){let t=(0,r._)(["\n  query Me {\n    me {\n      id\n      email\n      name\n      role\n      status\n    }\n  }\n"]);return a=function(){return t},t}function u(){let t=(0,r._)(["\n  query Boards {\n    boards {\n      id\n      title\n      visibility\n    }\n  }\n"]);return u=function(){return t},t}function l(){let t=(0,r._)(["\n  query Board($id: ID!) {\n    board(id: $id) {\n      id\n      title\n      visibility\n      ownerId\n    }\n  }\n"]);return l=function(){return t},t}function d(){let t=(0,r._)(["\n  query Lists($boardId: ID!) {\n    lists(boardId: $boardId) {\n      id\n      title\n      order\n      color\n    }\n  }\n"]);return d=function(){return t},t}function c(){let t=(0,r._)(["\n  query Tasks($listId: ID!) {\n    tasks(listId: $listId) {\n      id\n      listId\n      title\n      description\n      status\n      priority\n      tags\n    }\n  }\n"]);return c=function(){return t},t}function m(){let t=(0,r._)(["\n  query Task($id: ID!) {\n    task(id: $id) {\n      id\n      listId\n      title\n      description\n      status\n      priority\n      tags\n      assigneeId\n      dueDate\n    }\n  }\n"]);return m=function(){return t},t}function f(){let t=(0,r._)(["\n  mutation CreateBoard($input: CreateBoardInput!) {\n    createBoard(input: $input) {\n      id\n      title\n      visibility\n    }\n  }\n"]);return f=function(){return t},t}function p(){let t=(0,r._)(["\n  mutation CreateList($input: CreateListInput!) {\n    createList(input: $input) {\n      id\n      title\n      order\n      boardId\n    }\n  }\n"]);return p=function(){return t},t}function x(){let t=(0,r._)(["\n  mutation CreateTask($input: CreateTaskInput!) {\n    createTask(input: $input) {\n      id\n      title\n      listId\n      status\n      priority\n      tags\n    }\n  }\n"]);return x=function(){return t},t}function b(){let t=(0,r._)(["\n  mutation UpdateTaskStatus($id: ID!, $status: TaskStatus!) {\n    updateTaskStatus(id: $id, status: $status) {\n      id\n      title\n      listId\n      status\n      priority\n      tags\n    }\n  }\n"]);return b=function(){return t},t}function h(){let t=(0,r._)(["\n  subscription TaskUpdated($boardId: ID!) {\n    taskUpdated(boardId: $boardId) {\n      type\n      task {\n        id\n        listId\n        title\n        status\n        priority\n        tags\n      }\n    }\n  }\n"]);return h=function(){return t},t}let g=(0,i.Ps)(s()),v=(0,i.Ps)(o());(0,i.Ps)(a());let w=(0,i.Ps)(u()),I=(0,i.Ps)(l()),y=(0,i.Ps)(d()),k=(0,i.Ps)(c());(0,i.Ps)(m());let N=(0,i.Ps)(f()),j=(0,i.Ps)(p()),_=(0,i.Ps)(x()),$=(0,i.Ps)(b()),P=(0,i.Ps)(h())},6463:function(t,e,n){"use strict";var r=n(1169);n.o(r,"useParams")&&n.d(e,{useParams:function(){return r.useParams}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}})},3947:function(t,e,n){"use strict";n.d(e,{t:function(){return o}});var r=n(9099);let i="taskboard_token",s="taskboard_user",o=(0,r.Ue)(t=>({token:null,user:null,hydrated:!1,setToken:e=>{e?window.localStorage.setItem(i,e):window.localStorage.removeItem(i),t({token:e})},setUser:e=>{e?window.localStorage.setItem(s,JSON.stringify(e)):window.localStorage.removeItem(s),t({user:e})},clearAuth:()=>{window.localStorage.removeItem(i),window.localStorage.removeItem(s),t({token:null,user:null})},hydrateFromStorage:()=>{let e=window.localStorage.getItem(i),n=window.localStorage.getItem(s);t({token:e||null,user:n?JSON.parse(n):null,hydrated:!0})}}))},9422:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(2474),i=n(2511).Nq?r.useLayoutEffect:r.useEffect},5694:function(t,e,n){"use strict";n.d(e,{D:function(){return m}});var r=n(1735),i=n(2474),s=n(1135),o=n(4511),a=n(8607),u=n(1288),l=n(2471),d=n(9422),c=n(4230);function m(t,e){!1!==globalThis.__DEV__&&(0,c.G)(e||{},"ignoreResults","useMutation","If you don't want to synchronize component state with the mutation, please use the `useApolloClient` hook to get the client instance and call `client.mutate` directly.");var n=(0,l.x)(null==e?void 0:e.client);(0,a.Vp)(t,a.n_.Mutation);var m=i.useState({called:!1,loading:!1,client:n}),f=m[0],p=m[1],x=i.useRef({result:f,mutationId:0,isMounted:!0,client:n,mutation:t,options:e});(0,d.L)(function(){Object.assign(x.current,{client:n,options:e,mutation:t})});var b=i.useCallback(function(t){void 0===t&&(t={});var e=x.current,n=e.options,i=e.mutation,a=(0,r.pi)((0,r.pi)({},n),{mutation:i}),l=t.client||x.current.client;x.current.result.loading||a.ignoreResults||!x.current.isMounted||p(x.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:l});var d=++x.current.mutationId,c=(0,s.J)(a,t);return l.mutate(c).then(function(e){var n,r,i=e.data,s=e.errors,a=s&&s.length>0?new u.cA({graphQLErrors:s}):void 0,m=t.onError||(null===(n=x.current.options)||void 0===n?void 0:n.onError);if(a&&m&&m(a,c),d===x.current.mutationId&&!c.ignoreResults){var f={called:!0,loading:!1,data:i,error:a,client:l};x.current.isMounted&&!(0,o.D)(x.current.result,f)&&p(x.current.result=f)}var b=t.onCompleted||(null===(r=x.current.options)||void 0===r?void 0:r.onCompleted);return a||null==b||b(e.data,c),e},function(e){if(d===x.current.mutationId&&x.current.isMounted){var n,r={loading:!1,error:e,data:void 0,called:!0,client:l};(0,o.D)(x.current.result,r)||p(x.current.result=r)}var i=t.onError||(null===(n=x.current.options)||void 0===n?void 0:n.onError);if(i)return i(e,c),{data:void 0,errors:e};throw e})},[]),h=i.useCallback(function(){if(x.current.isMounted){var t={called:!1,loading:!1,client:x.current.client};Object.assign(x.current,{mutationId:0,result:t}),p(t)}},[]);return i.useEffect(function(){var t=x.current;return t.isMounted=!0,function(){t.isMounted=!1}},[]),[b,(0,r.pi)({reset:h},f)]}}},function(t){t.O(0,[22,506,914,632,971,23,744],function(){return t(t.s=8242)}),_N_E=t.O()}]);