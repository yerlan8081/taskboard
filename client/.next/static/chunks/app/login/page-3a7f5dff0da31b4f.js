(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7754:function(t,n,e){Promise.resolve().then(e.bind(e,5207))},5207:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return d}});var r=e(7437),i=e(5694),u=e(6463),o=e(2265),s=e(7138),a=e(3947),l=e(4078);function d(){let t=(0,u.useRouter)(),n=(0,a.t)(t=>t.setToken),e=(0,a.t)(t=>t.setUser),[d,c]=(0,o.useState)("owner@test.com"),[m,f]=(0,o.useState)("Passw0rd!"),[p,b]=(0,o.useState)(null),[v,{loading:g}]=(0,i.D)(l.ym,{onCompleted:r=>{var i,u;let o=null==r?void 0:null===(i=r.login)||void 0===i?void 0:i.token,s=null==r?void 0:null===(u=r.login)||void 0===u?void 0:u.user;o&&(n(o),e(s),t.push("/boards"))},onError:t=>{b(t.message)}});return(0,r.jsxs)("main",{className:"w-full max-w-xl space-y-6 rounded-3xl border border-white/10 bg-slate-900/70 px-8 py-10 shadow-2xl backdrop-blur",children:[(0,r.jsxs)("header",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-amber-300",children:"Taskboard"}),(0,r.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Login"}),(0,r.jsx)("p",{className:"text-sm text-slate-400",children:"Use your account to access boards."})]}),(0,r.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!d.includes("@")){b("Please enter a valid email");return}if(!m){b("Password cannot be empty");return}b(null),v({variables:{input:{email:d.trim(),password:m}}})},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-slate-300",children:"Email"}),(0,r.jsx)("input",{value:d,onChange:t=>c(t.target.value),className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-white focus:border-amber-400 focus:outline-none",type:"email",placeholder:"you@example.com",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-slate-300",children:"Password"}),(0,r.jsx)("input",{value:m,onChange:t=>f(t.target.value),className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-white focus:border-amber-400 focus:outline-none",type:"password",placeholder:"********",required:!0})]}),p&&(0,r.jsx)("p",{className:"text-sm text-red-300",children:p}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"w-full rounded-xl bg-amber-500 px-4 py-2 text-center text-sm font-semibold text-slate-900 shadow hover:bg-amber-400 disabled:opacity-60",children:g?"Logging in...":"Login"})]}),(0,r.jsxs)("div",{className:"text-sm text-slate-400",children:[(0,r.jsx)(s.default,{href:"/boards",className:"text-amber-300 hover:text-amber-200",children:"Go to boards"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(s.default,{href:"/register",className:"text-amber-300 hover:text-amber-200",children:"No account? Register"})})]})]})}},4078:function(t,n,e){"use strict";e.d(n,{$E:function(){return j},Bv:function(){return N},Jn:function(){return I},Nz:function(){return h},V_:function(){return _},XB:function(){return k},Z8:function(){return P},ew:function(){return $},mL:function(){return w},sY:function(){return y},ym:function(){return x}});var r=e(8646),i=e(1432);function u(){let t=(0,r._)(["\n  mutation Login($input: LoginInput!) {\n    login(input: $input) {\n      token\n      user {\n        id\n        email\n        name\n        role\n        status\n      }\n    }\n  }\n"]);return u=function(){return t},t}function o(){let t=(0,r._)(["\n  mutation Register($input: RegisterInput!) {\n    register(input: $input) {\n      token\n      user {\n        id\n        email\n        name\n        role\n        status\n      }\n    }\n  }\n"]);return o=function(){return t},t}function s(){let t=(0,r._)(["\n  query Me {\n    me {\n      id\n      email\n      name\n      role\n      status\n    }\n  }\n"]);return s=function(){return t},t}function a(){let t=(0,r._)(["\n  query Boards {\n    boards {\n      id\n      title\n      visibility\n    }\n  }\n"]);return a=function(){return t},t}function l(){let t=(0,r._)(["\n  query Board($id: ID!) {\n    board(id: $id) {\n      id\n      title\n      visibility\n      ownerId\n    }\n  }\n"]);return l=function(){return t},t}function d(){let t=(0,r._)(["\n  query Lists($boardId: ID!) {\n    lists(boardId: $boardId) {\n      id\n      title\n      order\n      color\n    }\n  }\n"]);return d=function(){return t},t}function c(){let t=(0,r._)(["\n  query Tasks($listId: ID!) {\n    tasks(listId: $listId) {\n      id\n      listId\n      title\n      description\n      status\n      priority\n      tags\n    }\n  }\n"]);return c=function(){return t},t}function m(){let t=(0,r._)(["\n  query Task($id: ID!) {\n    task(id: $id) {\n      id\n      listId\n      title\n      description\n      status\n      priority\n      tags\n      assigneeId\n      dueDate\n    }\n  }\n"]);return m=function(){return t},t}function f(){let t=(0,r._)(["\n  mutation CreateBoard($input: CreateBoardInput!) {\n    createBoard(input: $input) {\n      id\n      title\n      visibility\n    }\n  }\n"]);return f=function(){return t},t}function p(){let t=(0,r._)(["\n  mutation CreateList($input: CreateListInput!) {\n    createList(input: $input) {\n      id\n      title\n      order\n      boardId\n    }\n  }\n"]);return p=function(){return t},t}function b(){let t=(0,r._)(["\n  mutation CreateTask($input: CreateTaskInput!) {\n    createTask(input: $input) {\n      id\n      title\n      listId\n      status\n      priority\n      tags\n    }\n  }\n"]);return b=function(){return t},t}function v(){let t=(0,r._)(["\n  mutation UpdateTaskStatus($id: ID!, $status: TaskStatus!) {\n    updateTaskStatus(id: $id, status: $status) {\n      id\n      title\n      listId\n      status\n      priority\n      tags\n    }\n  }\n"]);return v=function(){return t},t}function g(){let t=(0,r._)(["\n  subscription TaskUpdated($boardId: ID!) {\n    taskUpdated(boardId: $boardId) {\n      type\n      task {\n        id\n        listId\n        title\n        status\n        priority\n        tags\n      }\n    }\n  }\n"]);return g=function(){return t},t}let x=(0,i.Ps)(u()),h=(0,i.Ps)(o());(0,i.Ps)(s());let w=(0,i.Ps)(a()),I=(0,i.Ps)(l()),y=(0,i.Ps)(d()),k=(0,i.Ps)(c());(0,i.Ps)(m());let _=(0,i.Ps)(f()),N=(0,i.Ps)(p()),$=(0,i.Ps)(b()),P=(0,i.Ps)(v()),j=(0,i.Ps)(g())},6463:function(t,n,e){"use strict";var r=e(1169);e.o(r,"useParams")&&e.d(n,{useParams:function(){return r.useParams}}),e.o(r,"useRouter")&&e.d(n,{useRouter:function(){return r.useRouter}})},3947:function(t,n,e){"use strict";e.d(n,{t:function(){return o}});var r=e(9099);let i="taskboard_token",u="taskboard_user",o=(0,r.Ue)(t=>({token:null,user:null,hydrated:!1,setToken:n=>{n?window.localStorage.setItem(i,n):window.localStorage.removeItem(i),t({token:n})},setUser:n=>{n?window.localStorage.setItem(u,JSON.stringify(n)):window.localStorage.removeItem(u),t({user:n})},clearAuth:()=>{window.localStorage.removeItem(i),window.localStorage.removeItem(u),t({token:null,user:null})},hydrateFromStorage:()=>{let n=window.localStorage.getItem(i),e=window.localStorage.getItem(u);t({token:n||null,user:e?JSON.parse(e):null,hydrated:!0})}}))},9422:function(t,n,e){"use strict";e.d(n,{L:function(){return i}});var r=e(2474),i=e(2511).Nq?r.useLayoutEffect:r.useEffect},5694:function(t,n,e){"use strict";e.d(n,{D:function(){return m}});var r=e(1735),i=e(2474),u=e(1135),o=e(4511),s=e(8607),a=e(1288),l=e(2471),d=e(9422),c=e(4230);function m(t,n){!1!==globalThis.__DEV__&&(0,c.G)(n||{},"ignoreResults","useMutation","If you don't want to synchronize component state with the mutation, please use the `useApolloClient` hook to get the client instance and call `client.mutate` directly.");var e=(0,l.x)(null==n?void 0:n.client);(0,s.Vp)(t,s.n_.Mutation);var m=i.useState({called:!1,loading:!1,client:e}),f=m[0],p=m[1],b=i.useRef({result:f,mutationId:0,isMounted:!0,client:e,mutation:t,options:n});(0,d.L)(function(){Object.assign(b.current,{client:e,options:n,mutation:t})});var v=i.useCallback(function(t){void 0===t&&(t={});var n=b.current,e=n.options,i=n.mutation,s=(0,r.pi)((0,r.pi)({},e),{mutation:i}),l=t.client||b.current.client;b.current.result.loading||s.ignoreResults||!b.current.isMounted||p(b.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:l});var d=++b.current.mutationId,c=(0,u.J)(s,t);return l.mutate(c).then(function(n){var e,r,i=n.data,u=n.errors,s=u&&u.length>0?new a.cA({graphQLErrors:u}):void 0,m=t.onError||(null===(e=b.current.options)||void 0===e?void 0:e.onError);if(s&&m&&m(s,c),d===b.current.mutationId&&!c.ignoreResults){var f={called:!0,loading:!1,data:i,error:s,client:l};b.current.isMounted&&!(0,o.D)(b.current.result,f)&&p(b.current.result=f)}var v=t.onCompleted||(null===(r=b.current.options)||void 0===r?void 0:r.onCompleted);return s||null==v||v(n.data,c),n},function(n){if(d===b.current.mutationId&&b.current.isMounted){var e,r={loading:!1,error:n,data:void 0,called:!0,client:l};(0,o.D)(b.current.result,r)||p(b.current.result=r)}var i=t.onError||(null===(e=b.current.options)||void 0===e?void 0:e.onError);if(i)return i(n,c),{data:void 0,errors:n};throw n})},[]),g=i.useCallback(function(){if(b.current.isMounted){var t={called:!1,loading:!1,client:b.current.client};Object.assign(b.current,{mutationId:0,result:t}),p(t)}},[]);return i.useEffect(function(){var t=b.current;return t.isMounted=!0,function(){t.isMounted=!1}},[]),[v,(0,r.pi)({reset:g},f)]}}},function(t){t.O(0,[22,506,971,23,744],function(){return t(t.s=7754)}),_N_E=t.O()}]);